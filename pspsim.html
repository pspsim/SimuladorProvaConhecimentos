<!DOCTYPE html>
<html lang="pt">
<head>
<meta charset="UTF-8">
<title>Simulador PSP</title>
<style>
  body { font-family: Arial, sans-serif; margin: 20px; background: #f0f0f0; }
  header { background-color: #003366; color: white; position: relative; height: 140px; display: flex; flex-direction: column; justify-content: center; align-items: center; font-weight: bold; overflow: hidden; }
  header .title { font-size: 2.8rem; letter-spacing: 1px; text-transform: uppercase; z-index: 2; }
  header .subtitle { font-size: 1.05rem; font-style: italic; margin-top: 8px; text-align: center; max-width: 90%; z-index: 2; }
  header .stripes { position: absolute; bottom: -60px; right: -20px; width: 240px; height: 300px; transform-origin: bottom right; transform: rotate(17deg); pointer-events: none; background: linear-gradient(to right, #003366 0%, #003366 30%, white 30%, white 38%, #003366 38%, #003366 48%, white 48%, white 55%, #003366 55%, #003366 65%, white 65%, white 72%, #003366 72%, #003366 100%); }
  h2 { margin-top: 30px; color: #003366; border-bottom: 2px solid #003366; padding-bottom: 5px; }
  .question { margin-bottom: 20px; padding: 10px; background: white; border-radius: 5px; }
  .options label { display: block; margin-bottom: 5px; }
  #timer { font-size: 20px; font-weight: bold; text-align: center; margin: 20px 0; }
  #submit { display: block; margin: 20px auto; padding: 10px 20px; font-size: 16px; }
  #result { margin-top: 20px; font-size: 18px; font-weight: bold; text-align: center; }
</style>
</head>
<body>

<header>
  <div class="title">SIMULADOR PSP</div>
  <div class="subtitle">Simulação da Prova de Conhecimentos da Polícia de Segurança Pública</div>
  <div class="stripes"></div>
</header>

<div id="timer">02:00:00</div>
<form id="quizForm"></form>
<button id="submit">Submeter Teste</button>
<div id="result"></div>

<script>
const questionsData = {
  "texts": [],

  "questions": [
    {
      "id": 1,
      "topic": "I",
      "type": "normal",
      "question": "Qual é a capital de Portugal?",
      "options": ["Porto", "Lisboa", "Coimbra", "Todas as anteriores"],
      "correct": 1
    },
    {
      "id": 2,
      "topic": "I",
      "type": "normal",
      "question": "Qual é a língua oficial de Portugal?",
      "options": ["Espanhol", "Português", "Francês", "Todas as anteriores"],
      "correct": 1
    },
    {
      "id": 3,
      "topic": "I",
      "type": "normal",
      "question": "O Pico situa-se em que arquipélago?",
      "options": ["Madeira", "Açores", "Canárias", "Todas as anteriores"],
      "correct": 1
    },
    {
      "id": 4,
      "topic": "I",
      "type": "normal",
      "question": "Qual é o rio mais longo de Portugal?",
      "options": ["Douro", "Tejo", "Guadiana", "Todas as anteriores"],
      "correct": 1
    },
    {
      "id": 5,
      "topic": "I",
      "type": "normal",
      "question": "Portugal é um Estado:",
      "options": ["Federal", "Unitário", "Confederado", "Todas as anteriores"],
      "correct": 1
    },

    {
      "id": 6,
      "topic": "II",
      "type": "normal",
      "question": "Quem escreveu 'Os Lusíadas'?",
      "options": ["Fernando Pessoa", "Luís de Camões", "Eça de Queirós", "Todas as anteriores"],
      "correct": 1
    },
    {
      "id": 7,
      "topic": "II",
      "type": "normal",
      "question": "Qual é o planeta mais próximo do Sol?",
      "options": ["Vénus", "Mercúrio", "Marte", "Todas as anteriores"],
      "correct": 1
    },
    {
      "id": 8,
      "topic": "II",
      "type": "normal",
      "question": "Quem pintou a Mona Lisa?",
      "options": ["Michelangelo", "Leonardo da Vinci", "Rafael", "Todas as anteriores"],
      "correct": 1
    },
    {
      "id": 9,
      "topic": "II",
      "type": "normal",
      "question": "Qual é o oceano que banha Portugal?",
      "options": ["Atlântico", "Índico", "Pacífico", "Todas as anteriores"],
      "correct": 0
    },
    {
      "id": 10,
      "topic": "II",
      "type": "normal",
      "question": "Qual é a moeda do Japão?",
      "options": ["Yuan", "Won", "Iene", "Todas as anteriores"],
      "correct": 2
    },

    {
      "id": 11,
      "topic": "III",
      "type": "normal",
      "question": "Quantos Estados-membros tem a União Europeia (2024)?",
      "options": ["25", "26", "27", "Todas as anteriores"],
      "correct": 2
    },
    {
      "id": 12,
      "topic": "III",
      "type": "normal",
      "question": "Qual é a moeda oficial da maioria dos países da UE?",
      "options": ["Euro", "Libra", "Dólar", "Todas as anteriores"],
      "correct": 0
    },
    {
      "id": 13,
      "topic": "III",
      "type": "normal",
      "question": "O Parlamento Europeu é eleito por:",
      "options": ["Nomeação", "Sufrágio universal", "Concurso público", "Todas as anteriores"],
      "correct": 1
    },
    {
      "id": 14,
      "topic": "III",
      "type": "normal",
      "question": "A sede da Comissão Europeia situa-se em:",
      "options": ["Luxemburgo", "Estrasburgo", "Bruxelas", "Todas as anteriores"],
      "correct": 2
    },

    {
      "id": 15,
      "topic": "IV",
      "type": "normal",
      "question": "A Constituição da República Portuguesa foi aprovada em:",
      "options": ["1974", "1975", "1976", "Todas as anteriores"],
      "correct": 2
    },
    {
      "id": 16,
      "topic": "IV",
      "type": "normal",
      "question": "Portugal é um Estado de direito:",
      "options": ["Social", "Democrático", "Ambos", "Todas as anteriores"],
      "correct": 2
    },
    {
      "id": 17,
      "topic": "IV",
      "type": "normal",
      "question": "Quem exerce o poder legislativo?",
      "options": ["Governo", "Tribunais", "Assembleia da República", "Todas as anteriores"],
      "correct": 2
    },
    {
      "id": 18,
      "topic": "IV",
      "type": "normal",
      "question": "O Presidente da República é eleito por:",
      "options": ["Parlamento", "Governo", "Sufrágio universal", "Todas as anteriores"],
      "correct": 2
    },

    {
      "id": 19,
      "topic": "V",
      "type": "normal",
      "question": "A PSP é uma força de segurança de natureza:",
      "options": ["Militar", "Civil", "Privada", "Todas as anteriores"],
      "correct": 1
    },
    {
      "id": 20,
      "topic": "V",
      "type": "normal",
      "question": "A PSP depende de que ministério?",
      "options": ["Defesa", "Justiça", "Administração Interna", "Todas as anteriores"],
      "correct": 2
    },
    {
      "id": 21,
      "topic": "V",
      "type": "normal",
      "question": "Uma das missões da PSP é:",
      "options": ["Garantir a segurança interna", "Defender a legalidade democrática", "Proteger pessoas e bens", "Todas as anteriores"],
      "correct": 3
    },
    {
      "id": 22,
      "topic": "V",
      "type": "normal",
      "question": "A PSP atua preferencialmente em:",
      "options": ["Meio rural", "Zonas urbanas", "Fronteiras", "Todas as anteriores"],
      "correct": 1
    },

    {
      "id": 23,
      "topic": "VI",
      "type": "normal",
      "question": "Os Direitos Humanos são:",
      "options": ["Universais", "Indivisíveis", "Interdependentes", "Todas as anteriores"],
      "correct": 3
    },
    {
      "id": 24,
      "topic": "VI",
      "type": "normal",
      "question": "O direito à vida é:",
      "options": ["Relativo", "Fundamental", "Opcional", "Todas as anteriores"],
      "correct": 1
    },
    {
      "id": 25,
      "topic": "VI",
      "type": "normal",
      "question": "A tortura é:",
      "options": ["Permitida", "Limitada", "Proibida", "Todas as anteriores"],
      "correct": 2
    },

    {
      "id": 26,
      "topic": "VII",
      "type": "normal",
      "question": "Qual é o atual Secretário-Geral da ONU?",
      "options": ["Ban Ki-moon", "António Guterres", "Jens Stoltenberg", "Todas as anteriores"],
      "correct": 1
    },
    {
      "id": 27,
      "topic": "VII",
      "type": "normal",
      "question": "A NATO é uma organização de carácter:",
      "options": ["Económico", "Militar", "Cultural", "Todas as anteriores"],
      "correct": 1
    }
    ,
{
  "id": 28,
  "topic": "I",
  "type": "normal",
  "question": "Qual é a cidade mais populosa de Portugal?",
  "options": ["Porto", "Lisboa", "Braga", "Todas as anteriores"],
  "correct": 1
},
{
  "id": 29,
  "topic": "I",
  "type": "normal",
  "question": "O arquipélago da Madeira situa-se no oceano:",
  "options": ["Atlântico", "Pacífico", "Índico", "Todas as anteriores"],
  "correct": 0
},
{
  "id": 30,
  "topic": "I",
  "type": "normal",
  "question": "Qual destes rios nasce em Portugal?",
  "options": ["Tejo", "Douro", "Sado", "Todas as anteriores"],
  "correct": 2
},

{
  "id": 31,
  "topic": "II",
  "type": "normal",
  "question": "Quem escreveu 'Mensagem'?",
  "options": ["Fernando Pessoa", "Camilo Castelo Branco", "Eça de Queirós", "Todas as anteriores"],
  "correct": 0
},
{
  "id": 32,
  "topic": "II",
  "type": "normal",
  "question": "Qual é o maior planeta do sistema solar?",
  "options": ["Saturno", "Júpiter", "Neptuno", "Todas as anteriores"],
  "correct": 1
},
{
  "id": 33,
  "topic": "II",
  "type": "normal",
  "question": "A água ferve a que temperatura (nível do mar)?",
  "options": ["90ºC", "95ºC", "100ºC", "Todas as anteriores"],
  "correct": 2
},

{
  "id": 34,
  "topic": "III",
  "type": "normal",
  "question": "Portugal aderiu à União Europeia em:",
  "options": ["1985", "1986", "1987", "Todas as anteriores"],
  "correct": 1
},
{
  "id": 35,
  "topic": "III",
  "type": "normal",
  "question": "O Banco Central Europeu tem sede em:",
  "options": ["Paris", "Bruxelas", "Frankfurt", "Todas as anteriores"],
  "correct": 2
},
{
  "id": 36,
  "topic": "III",
  "type": "normal",
  "question": "A UE baseia-se nos valores de:",
  "options": ["Liberdade", "Democracia", "Estado de direito", "Todas as anteriores"],
  "correct": 3
},

{
  "id": 37,
  "topic": "IV",
  "type": "normal",
  "question": "A soberania reside em:",
  "options": ["No Governo", "No Presidente", "No povo", "Todas as anteriores"],
  "correct": 2
},
{
  "id": 38,
  "topic": "IV",
  "type": "normal",
  "question": "O poder judicial é exercido por:",
  "options": ["Tribunais", "Governo", "Assembleia", "Todas as anteriores"],
  "correct": 0
},
{
  "id": 39,
  "topic": "IV",
  "type": "normal",
  "question": "A revisão constitucional compete a:",
  "options": ["Presidente", "Tribunais", "Assembleia da República", "Todas as anteriores"],
  "correct": 2
},

{
  "id": 40,
  "topic": "V",
  "type": "normal",
  "question": "A PSP tem competências em matéria de:",
  "options": ["Ordem pública", "Investigação criminal", "Fiscalização administrativa", "Todas as anteriores"],
  "correct": 3
},
{
  "id": 41,
  "topic": "V",
  "type": "normal",
  "question": "O uso da força pela PSP deve ser:",
  "options": ["Necessário", "Proporcional", "Adequado", "Todas as anteriores"],
  "correct": 3
},
{
  "id": 42,
  "topic": "V",
  "type": "normal",
  "question": "A PSP atua no respeito pelos princípios de:",
  "options": ["Legalidade", "Imparcialidade", "Proporcionalidade", "Todas as anteriores"],
  "correct": 3
},

{
  "id": 43,
  "topic": "VI",
  "type": "normal",
  "question": "A dignidade da pessoa humana é:",
  "options": ["Relativa", "Negociável", "Inviolável", "Todas as anteriores"],
  "correct": 2
},
{
  "id": 44,
  "topic": "VI",
  "type": "normal",
  "question": "O direito à liberdade termina quando:",
  "options": ["O Estado decide", "Colide com direitos de outros", "É inconveniente", "Todas as anteriores"],
  "correct": 1
},
{
  "id": 45,
  "topic": "VI",
  "type": "normal",
  "question": "A igualdade significa:",
  "options": ["Tratamento idêntico absoluto", "Ausência de discriminação", "Uniformidade total", "Todas as anteriores"],
  "correct": 1
},

{
  "id": 46,
  "topic": "VII",
  "type": "normal",
  "question": "Qual é o continente mais populoso?",
  "options": ["África", "Europa", "Ásia", "Todas as anteriores"],
  "correct": 2
},
{
  "id": 47,
  "topic": "VII",
  "type": "normal",
  "question": "A ONU foi criada em:",
  "options": ["1945", "1950", "1960", "Todas as anteriores"],
  "correct": 0
},
{
  "id": 48,
  "topic": "VII",
  "type": "normal",
  "question": "A Assembleia Geral da ONU reúne:",
  "options": ["Alguns países", "Apenas potências", "Todos os Estados-membros", "Todas as anteriores"],
  "correct": 2
},

{
  "id": 49,
  "topic": "I",
  "type": "normal",
  "question": "O clima predominante em Portugal é:",
  "options": ["Continental", "Mediterrânico", "Tropical", "Todas as anteriores"],
  "correct": 1
},

{
  "id": 50,
  "topic": "II",
  "type": "normal",
  "question": "Quem foi Albert Einstein?",
  "options": ["Pintor", "Escritor", "Cientista", "Todas as anteriores"],
  "correct": 2
}
,
{
  "id": 51,
  "topic": "I",
  "type": "normal",
  "question": "Qual é a fronteira natural mais extensa de Portugal?",
  "options": ["Oceano Atlântico", "Rio Tejo", "Rio Douro", "Todas as anteriores"],
  "correct": 0
},
{
  "id": 52,
  "topic": "I",
  "type": "normal",
  "question": "Qual é o distrito mais a sul de Portugal continental?",
  "options": ["Beja", "Faro", "Setúbal", "Todas as anteriores"],
  "correct": 1
},
{
  "id": 53,
  "topic": "I",
  "type": "normal",
  "question": "Os Açores são compostos por quantas ilhas?",
  "options": ["7", "8", "9", "Todas as anteriores"],
  "correct": 2
},

{
  "id": 54,
  "topic": "II",
  "type": "normal",
  "question": "Quem pintou a Mona Lisa?",
  "options": ["Michelangelo", "Leonardo da Vinci", "Rafael", "Todas as anteriores"],
  "correct": 1
},
{
  "id": 55,
  "topic": "II",
  "type": "normal",
  "question": "Qual é o símbolo químico do oxigénio?",
  "options": ["Ox", "O", "Og", "Todas as anteriores"],
  "correct": 1
},
{
  "id": 56,
  "topic": "II",
  "type": "normal",
  "question": "A Terra gira em torno de:",
  "options": ["Da Lua", "Do Sol", "De Marte", "Todas as anteriores"],
  "correct": 1
},

{
  "id": 57,
  "topic": "III",
  "type": "normal",
  "question": "O Conselho Europeu é composto por:",
  "options": ["Chefes de Estado ou Governo", "Deputados europeus", "Juízes europeus", "Todas as anteriores"],
  "correct": 0
},
{
  "id": 58,
  "topic": "III",
  "type": "normal",
  "question": "O Parlamento Europeu tem funções:",
  "options": ["Legislativas", "Orçamentais", "De controlo político", "Todas as anteriores"],
  "correct": 3
},
{
  "id": 59,
  "topic": "III",
  "type": "normal",
  "question": "A cidadania europeia é atribuída a:",
  "options": ["Residentes", "Nacionais dos Estados-membros", "Imigrantes legais", "Todas as anteriores"],
  "correct": 1
},

{
  "id": 60,
  "topic": "IV",
  "type": "normal",
  "question": "O Presidente da República é eleito por:",
  "options": ["Sufrágio direto", "Assembleia da República", "Governo", "Todas as anteriores"],
  "correct": 0
},
{
  "id": 61,
  "topic": "IV",
  "type": "normal",
  "question": "A Assembleia da República é composta por:",
  "options": ["Ministros", "Deputados", "Juízes", "Todas as anteriores"],
  "correct": 1
},
{
  "id": 62,
  "topic": "IV",
  "type": "normal",
  "question": "O Governo é politicamente responsável perante:",
  "options": ["Tribunais", "Presidente", "Assembleia da República", "Todas as anteriores"],
  "correct": 2
},

{
  "id": 63,
  "topic": "V",
  "type": "normal",
  "question": "A PSP depende organicamente de que ministério?",
  "options": ["Ministério da Defesa", "Ministério da Administração Interna", "Ministério da Justiça", "Todas as anteriores"],
  "correct": 1
},
{
  "id": 64,
  "topic": "V",
  "type": "normal",
  "question": "A PSP exerce funções em meio:",
  "options": ["Urbano", "Rural", "Marítimo", "Todas as anteriores"],
  "correct": 0
},
{
  "id": 65,
  "topic": "V",
  "type": "normal",
  "question": "O agente da PSP deve agir com:",
  "options": ["Autoridade", "Disciplina", "Respeito pelos cidadãos", "Todas as anteriores"],
  "correct": 3
},

{
  "id": 66,
  "topic": "VI",
  "type": "normal",
  "question": "O direito à vida é:",
  "options": ["Suspensível", "Condicionado", "Inviolável", "Todas as anteriores"],
  "correct": 2
},
{
  "id": 67,
  "topic": "VI",
  "type": "normal",
  "question": "A tortura é:",
  "options": ["Permitida em exceções", "Proibida", "Aceitável em guerra", "Todas as anteriores"],
  "correct": 1
},
{
  "id": 68,
  "topic": "VI",
  "type": "normal",
  "question": "Os direitos fundamentais aplicam-se a:",
  "options": ["Cidadãos portugueses", "Estrangeiros", "Apátridas", "Todas as anteriores"],
  "correct": 3
},

{
  "id": 69,
  "topic": "VII",
  "type": "normal",
  "question": "Qual destes é um órgão da ONU?",
  "options": ["Conselho de Segurança", "Tribunal Penal Internacional", "Banco Mundial", "Todas as anteriores"],
  "correct": 0
},
{
  "id": 70,
  "topic": "VII",
  "type": "normal",
  "question": "A NATO é uma organização de carácter:",
  "options": ["Económico", "Militar", "Humanitário", "Todas as anteriores"],
  "correct": 1
},
{
  "id": 71,
  "topic": "VII",
  "type": "normal",
  "question": "Portugal é membro da NATO desde:",
  "options": ["1949", "1955", "1960", "Todas as anteriores"],
  "correct": 0
},

{
  "id": 72,
  "topic": "I",
  "type": "normal",
  "question": "Qual é o ponto mais alto de Portugal continental?",
  "options": ["Serra da Estrela", "Pico", "Gerês", "Todas as anteriores"],
  "correct": 0
},
{
  "id": 73,
  "topic": "I",
  "type": "normal",
  "question": "O rio Tejo desagua em:",
  "options": ["Porto", "Lisboa", "Setúbal", "Todas as anteriores"],
  "correct": 1
},

{
  "id": 74,
  "topic": "II",
  "type": "normal",
  "question": "Quem foi Marie Curie?",
  "options": ["Escritora", "Cientista", "Política", "Todas as anteriores"],
  "correct": 1
},
{
  "id": 75,
  "topic": "II",
  "type": "normal",
  "question": "O número PI é aproximadamente:",
  "options": ["2.14", "3.14", "4.14", "Todas as anteriores"],
  "correct": 1
},

{
  "id": 76,
  "topic": "III",
  "type": "normal",
  "question": "O Tratado de Lisboa entrou em vigor em:",
  "options": ["2007", "2009", "2011", "Todas as anteriores"],
  "correct": 1
},
{
  "id": 77,
  "topic": "III",
  "type": "normal",
  "question": "A Comissão Europeia tem função:",
  "options": ["Executiva", "Judicial", "Legislativa exclusiva", "Todas as anteriores"],
  "correct": 0
},

{
  "id": 78,
  "topic": "IV",
  "type": "normal",
  "question": "O estado de sítio pode ser declarado por:",
  "options": ["Governo", "Presidente", "Assembleia", "Todas as anteriores"],
  "correct": 1
},
{
  "id": 79,
  "topic": "IV",
  "type": "normal",
  "question": "Os tribunais administram justiça em nome de:",
  "options": ["Governo", "Presidente", "Povo", "Todas as anteriores"],
  "correct": 2
},

{
  "id": 80,
  "topic": "V",
  "type": "normal",
  "question": "A PSP coopera com:",
  "options": ["GNR", "PJ", "Polícias estrangeiras", "Todas as anteriores"],
  "correct": 3
},

{
  "id": 81,
  "topic": "VI",
  "type": "normal",
  "question": "O princípio da proporcionalidade aplica-se a:",
  "options": ["Uso da força", "Atos administrativos", "Limitação de direitos", "Todas as anteriores"],
  "correct": 3
},

{
  "id": 82,
  "topic": "VII",
  "type": "normal",
  "question": "Qual é a capital dos Estados Unidos?",
  "options": ["Nova Iorque", "Washington D.C.", "Los Angeles", "Todas as anteriores"],
  "correct": 1
},
{
  "id": 83,
  "topic": "VII",
  "type": "normal",
  "question": "A União Africana é composta por países de:",
  "options": ["África", "Europa", "Ásia", "Todas as anteriores"],
  "correct": 0
},

{
  "id": 84,
  "topic": "I",
  "type": "normal",
  "question": "Portugal tem quantos distritos no continente?",
  "options": ["16", "18", "20", "Todas as anteriores"],
  "correct": 1
},

{
  "id": 85,
  "topic": "II",
  "type": "normal",
  "question": "Qual destes é um gás nobre?",
  "options": ["Oxigénio", "Azoto", "Hélio", "Todas as anteriores"],
  "correct": 2
},

{
  "id": 86,
  "topic": "III",
  "type": "normal",
  "question": "A livre circulação aplica-se a:",
  "options": ["Pessoas", "Bens", "Serviços", "Todas as anteriores"],
  "correct": 3
},

{
  "id": 87,
  "topic": "IV",
  "type": "normal",
  "question": "A Constituição é a lei:",
  "options": ["Mais recente", "Mais votada", "Suprema", "Todas as anteriores"],
  "correct": 2
},

{
  "id": 88,
  "topic": "V",
  "type": "normal",
  "question": "O uniforme da PSP simboliza:",
  "options": ["Autoridade", "Serviço público", "Disciplina", "Todas as anteriores"],
  "correct": 3
},

{
  "id": 89,
  "topic": "VI",
  "type": "normal",
  "question": "O direito de reunião é:",
  "options": ["Proibido", "Condicionado", "Garantido", "Todas as anteriores"],
  "correct": 2
},

{
  "id": 90,
  "topic": "VII",
  "type": "normal",
  "question": "O G20 reúne as maiores economias:",
  "options": ["Da Europa", "Do mundo", "Da OCDE", "Todas as anteriores"],
  "correct": 1
},
<

{
  "id": 91,
  "topic": "I",
  "type": "normal",
  "question": "O Algarve situa-se a:",
  "options": ["Norte", "Centro", "Sul", "Todas as anteriores"],
  "correct": 2
},

{
  "id": 92,
  "topic": "II",
  "type": "normal",
  "question": "Qual é o órgão responsável pela respiração?",
  "options": ["Coração", "Pulmões", "Rins", "Todas as anteriores"],
  "correct": 1
},

{
  "id": 93,
  "topic": "III",
  "type": "normal",
  "question": "O Tribunal de Justiça da UE garante:",
  "options": ["Aplicação do direito da UE", "Política externa", "Defesa comum", "Todas as anteriores"],
  "correct": 0
},

{
  "id": 94,
  "topic": "IV",
  "type": "normal",
  "question": "A revisão constitucional exige maioria:",
  "options": ["Simples", "Qualificada", "Absoluta", "Todas as anteriores"],
  "correct": 1
},

{
  "id": 95,
  "topic": "V",
  "type": "normal",
  "question": "A missão principal da PSP é:",
  "options": ["Garantir segurança", "Manter ordem pública", "Proteger cidadãos", "Todas as anteriores"],
  "correct": 3
},

{
  "id": 96,
  "topic": "VI",
  "type": "normal",
  "question": "O direito à integridade física protege contra:",
  "options": ["Violência", "Tortura", "Maus-tratos", "Todas as anteriores"],
  "correct": 3
},

{
  "id": 97,
  "topic": "VII",
  "type": "normal",
  "question": "A Organização Mundial da Saúde pertence à:",
  "options": ["NATO", "ONU", "UE", "Todas as anteriores"],
  "correct": 1
},

{
  "id": 98,
  "topic": "I",
  "type": "normal",
  "question": "O clima mediterrânico caracteriza-se por:",
  "options": ["Verões quentes", "Invernos suaves", "Pouca chuva no verão", "Todas as anteriores"],
  "correct": 3
},

{
  "id": 99,
  "topic": "II",
  "type": "normal",
  "question": "Qual destes números é primo?",
  "options": ["4", "6", "7", "Todas as anteriores"],
  "correct": 2
},

{
  "id": 100,
  "topic": "III",
  "type": "normal",
  "question": "A UE promove a cooperação entre Estados em matéria de:",
  "options": ["Economia", "Justiça", "Segurança", "Todas as anteriores"],
  "correct": 3
}

  ]
};
// Depois substituis o fetch por:
const data = questionsData.questions;

</script>
<script>
const quizForm = document.getElementById("quizForm");
const timerDiv = document.getElementById("timer");
const submitBtn = document.getElementById("submit");
const resultDiv = document.getElementById("result");

let testQuestions = []; // perguntas processadas com info do input e resposta

// ====== FUNÇÃO PARA EMBARALHAR ======
function shuffleArray(arr) {
  for (let i = arr.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [arr[i], arr[j]] = [arr[j], arr[i]];
  }
  return arr;
}

    // agrupar por tópico (usando string, ex: "I", "II")
  const topics = {};
  data.questions.forEach(q=>{
    if(!topics[q.topic]) topics[q.topic]=[];
    topics[q.topic].push(q);
  });


    // Criar formulário
    Object.keys(topics).forEach(topicKey => {
      const topicQuestions = shuffleArray(topics[topicKey]);

      // Título do tópico
      const h2 = document.createElement("h2");
      h2.textContent = `Tópico ${topicKey}`;
      quizForm.appendChild(h2);

      topicQuestions.forEach(q => {
        const div = document.createElement("div");
        div.className = "question";
        div.dataset.idx = q.idx;

        const p = document.createElement("p");
        p.textContent = q.question;
        div.appendChild(p);

        // Embaralhar opções (manter "Todas as anteriores" no fim)
        let opts = [...q.options];
        let todasOption;
        const todasIndex = opts.findIndex(o => o.startsWith("Todas"));
        if (todasIndex !== -1) {
          todasOption = opts.splice(todasIndex, 1)[0];
          opts = shuffleArray(opts);
          opts.push(todasOption);
        } else {
          opts = shuffleArray(opts);
        }

        opts.forEach((opt, i) => {
          const label = document.createElement("label");
          label.innerHTML = `O ${String.fromCharCode(65 + i)}) <input type="radio" name="q${q.idx}" value="${i}"> ${opt}`;
          div.appendChild(label);
        });

        quizForm.appendChild(div);

        // Guardar info para correção
        testQuestions.push({
          inputName: `q${q.idx}`,
          correct: q.correct, // índice 0-3
          optionsRendered: opts,
          questionDiv: div
        });
      });
    });

  } catch (err) {
    console.error("Erro a carregar JSON:", err);
  }
}

// ====== TIMER ======
let time = 2 * 60 * 60; // 2 horas
let timerInterval;
function startTimer() {
  timerInterval = setInterval(() => {
    const h = String(Math.floor(time / 3600)).padStart(2, '0');
    const m = String(Math.floor((time % 3600) / 60)).padStart(2, '0');
    const s = String(time % 60).padStart(2, '0');
    timerDiv.textContent = `${h}:${m}:${s}`;
    if (time <= 0) {
      clearInterval(timerInterval);
      submitTest();
    }
    time--;
  }, 1000);
}

// ====== SUBMETER E CORRIGIR ======
function submitTest() {
  clearInterval(timerInterval);
  let scoreCount = 0;

  testQuestions.forEach(q => {
    // Limpar feedback antigo
    q.questionDiv.querySelectorAll('.feedback').forEach(f => f.remove());
    q.questionDiv.style.border = "2px solid #ccc";

    const feedback = document.createElement("div");
    feedback.className = "feedback";
    feedback.style.marginTop = "8px";
    feedback.style.fontWeight = "bold";

    const selected = document.querySelector(`input[name="${q.inputName}"]:checked`);
    if (selected) {
      const userIndex = parseInt(selected.value);
      if (userIndex === q.correct) {
        scoreCount++;
        q.questionDiv.style.border = "2px solid green";
        feedback.style.color = "green";
        feedback.textContent = "✔ Resposta correta";
      } else {
        q.questionDiv.style.border = "2px solid red";
        feedback.style.color = "red";
        feedback.innerHTML = `
          ✘ Resposta errada<br>
          A tua resposta: O ${String.fromCharCode(65 + userIndex)}) ${q.optionsRendered[userIndex]}<br>
          Resposta correta: O ${String.fromCharCode(65 + q.correct)}) ${q.optionsRendered[q.correct]}
        `;
      }
    } else {
      q.questionDiv.style.border = "2px solid orange";
      feedback.style.color = "orange";
      feedback.textContent = "⚠ Pergunta não respondida";
    }

    q.questionDiv.appendChild(feedback);
  });

  const finalScore = (scoreCount / testQuestions.length) * 20;
  resultDiv.textContent = `Acertaste ${scoreCount}/${testQuestions.length} perguntas. Nota final: ${finalScore.toFixed(2)}/20`;
}

// ====== EVENTO SUBMIT ======
submitBtn.addEventListener("click", e => {
  e.preventDefault();
  submitTest();
});

// ====== INICIAR ======
loadQuestions().then(startTimer);
</script>
</body>
</html>